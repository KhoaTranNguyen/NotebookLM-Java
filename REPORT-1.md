# Java OOP Project Report: NotebookLM-Java Backend

## Versions
| Date         | Version | In charge      | Description                               |
|--------------|---------|----------------|-------------------------------------------|
| 24-Nov-2025  | V1.0    | AI Assistant   | Initial report generation based on code analysis. |

<br>

## Table of Contents
1. [INTRODUCTION](#i-introduction)
2. [CLASS ANALYSIS](#ii-class-analysis)
3. [CLASS DESIGN](#iii-class-design)
4. [PACKAGE DESIGN](#iv-package-design)
5. [INTERFACE DESIGN](#v-interface-design)
6. [ACCESS CONTROL](#vi-access-control)
7. [ENCAPSULATION VS INHERITANCE VS POLYMORPHISM](#vii-encapsulation-vs-inheritance-vs-polymorphism)
8. [EXPERIMENT](#viii-experiment)
9. [CONCLUSION](#ix-conclusion)
10. [APPENDIX A: CLASS DESCRIPTION](#appendix-a-class-description)

<br>

## I. INTRODUCTION

This project is a backend service for a "NotebookLM" style application, designed to act as an intelligent study assistant. The primary business requirement is to allow users to upload their documents (e.g., lecture notes, research papers in PDF format) and then leverage a Large Language Model (LLM) to interact with that content in meaningful ways.

This project provides the following key functions for a user (e.g., a student, a researcher):
- Upload a document to create a specific knowledge source.
- Chat with the document to ask questions and get answers based on its content.
- Automatically generate study aids from the document, such as:
    - Summaries
    - Flashcards
    - Multiple-choice quizzes
- Generate a podcast script to provide an audio-friendly summary of the material.
- Convert text into speech.

The system is designed with a single user role in mind: a **Learner**.

A simplified use-case diagram would look like this:

```
+----------+
| Learner  |
+----------+
     |
     |-----------------> (Upload Document)
     |
     |-----------------> (Chat with Document)
     |
     |-----------------> (Generate Summary)
     |
     |-----------------> (Generate Flashcards)
     |
     |-----------------> (Generate Quiz)
     |
     |-----------------> (Generate Podcast Script)
     |
     |-----------------> (Generate Audio from Text)
```

This project is built using **Java 21** and the **Spring Boot** framework, applying Object-Oriented Programming (OOP) principles for its design and structure. Key OOP concepts like encapsulation, abstraction (through interfaces), and polymorphism are utilized to create a modular and maintainable system.

## II. CLASS ANALYSIS

### 1. Objects

In the context of this study assistant, we can identify several conceptual objects:

| No | Object Name              | State                                       | Behaviours                                     |
|----|--------------------------|---------------------------------------------|------------------------------------------------|
| 1  | Study Document           | ID, text content, vector embeddings         | Can be ingested, can be queried                |
| 2  | Flashcard                | Question, Answer                            | Can be reviewed                                |
| 3  | Multiple Choice Question | Question, options, correct answer index     | Can be answered, can be checked                |
| 4  | Summary                  | Overview, main points, suggested actions    | Can be read                                    |
| 5  | AI Assistant             | Knows about a specific document, has memory | Can chat, can generate study aids              |

### 2. Classes

These objects are grouped into classes. The primary data-holding classes are located in the `com.khoa.notebooklm.model` package.

| No | Class Name               | Attributes                                  | Description                                    |
|----|--------------------------|---------------------------------------------|------------------------------------------------|
| 1  | `Flashcard`              | `question`, `answer`                        | Represents a single question-answer flashcard. |
| 2  | `MultipleChoiceQuestion` | `question`, `options`, `correctAnswerIndex` | Represents a single quiz question.             |
| 3  | `Summary`                | `overview`, `mainPoints`, `actionItems`     | Represents a structured summary of a document. |
| 4  | `PodcastScript`          | `title`, `script`                           | Represents a script for a short podcast.       |
| 5  | `RAGService`             | `embeddingModel`, `embeddingStore`, `chatModel` | Manages document ingestion and retrieval.      |
| 6  | `StudyController`        | `ragService`, `ttsService`                  | Exposes the application's features via a REST API. |

No direct class inheritance is observed among the primary model and service classes. Composition is used extensively, for example, `StudyController` is composed of `RAGService` and `TtsService`.

## III. CLASS DESIGN

### 1. Classes

The system's architecture is centered around the interaction between the Controller, Service, and Model layers, a common pattern in Spring Boot applications.

**Class Diagram (Conceptual)**

A text-based representation of the relationships:

```
[Client] -> [StudyController]
   |
   +---- uses ----> [RAGService]
   |                 |
   |                 +---- creates ----> [StudyAssistant (Interface)]
   |                 |
   |                 +---- uses ----> [EmbeddingModel, EmbeddingStore, ChatLanguageModel]
   |
   +---- uses ----> [TtsService]


[StudyAssistant] -> returns -> [FlashcardResponse, QuizResponse, Summary, ...]
```

**Detailed Class Table**

| No | Class             | Instance Variable                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            - `private final RAGService ragService;` (in `StudyController`) <br> - This is `private` because it's an internal dependency managed by the Spring framework. It's `final` because it's injected via the constructor and should not be changed afterward (Constructor Injection). | `public Map<String, String> uploadPdf(...)` <br> - This method is `public` to be accessible by the Spring web framework to handle HTTP requests. It defines an API endpoint. | This class acts as the entry point for all user requests, delegating the complex logic to service classes. |
| 2  | `RAGService`      | `private final EmbeddingStore<TextSegment> embeddingStore;` <br> - `private` and `final` for the same reasons as above. It encapsulates the core logic of the RAG pipeline.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               - `public void ingestDocument(...)` <br> - `public` to be called by `StudyController`. <br> - `public StudyAssistant createAssistantForDocument(...)` <br> - `public` to be called by `StudyController`. | This class is the heart of the AI functionality, managing the entire lifecycle of a document from parsing to retrieval. |
| 3  | `Flashcard`       | `private String question;` <br> `private String answer;` <br> - All fields are `private`, exposing them only via public getters and setters (Lombok's `@Data` annotation), which is a prime example of encapsulation. | `public String getQuestion()` <br> `public void setQuestion(String question)` <br> - Standard accessors and mutators. | This is a simple data object (POJO) for holding flashcard information. |

No abstract classes were identified in the analyzed source code.

### 2. Some OOP techniques

No significant method overloading was found in the key service or controller classes. The design favors distinct method names for different functionalities. Similarly, without a clear inheritance hierarchy, method overriding is not a prominent feature in this design. The primary OOP pillar in use is Encapsulation, as detailed in section VII.

## IV. PACKAGE DESIGN

The project follows a standard "feature-oriented" package structure, which is common in Spring Boot applications. The base package is `com.khoa.notebooklm`.

-   `com.khoa.notebooklm.config`: Contains configuration classes, such as `RAGConfig`, which sets up the beans required for the RAG pipeline (e.g., `EmbeddingStore`, `ChatLanguageModel`). This separates configuration from business logic.
-   `com.khoa.notebooklm.controller`: This package holds the REST controllers. Its sole responsibility is to handle incoming HTTP requests, validate them, and delegate to the appropriate service. It acts as the bridge between the outside world and the application's core logic.
-   `com.khoa.notebooklm.model`: Contains the Plain Old Java Objects (POJOs) that define the data structures of the application (e.g., `Flashcard`, `Summary`). These classes are used for carrying data between layers and for serializing/deserializing JSON payloads.
-   `com.khoa.notebooklm.service`: This package contains the core business logic.
    -   `RAGService` handles the complex process of document ingestion and retrieval.
    -   `TtsService` encapsulates the logic for text-to-speech conversion.
    -   `StudyAssistant` is an interface that defines the contract for AI interactions.

This separation of concerns makes the code easier to navigate, maintain, and test.

## V. INTERFACE DESIGN

The most significant use of an interface in this project is `com.khoa.notebooklm.service.StudyAssistant`.

This is not a traditional Java interface that a developer would manually implement. Instead, it's a "proxy interface" used by the LangChain4j framework.

**Design:**
-   The interface defines several methods like `chat(...)`, `generateFlashcards(...)`, and `generateSummary(...)`.
-   Each method is annotated with `@UserMessage` and sometimes `@SystemMessage`. These annotations contain the prompt templates that will be sent to the LLM.
-   The method parameters, annotated with `@V("...")`, are used to inject dynamic values into the prompts.
-   The return types are structured objects (e.g., `Summary`, `QuizResponse`), and LangChain4j is responsible for parsing the LLM's JSON output into these objects.

**Purpose:**
This design provides a powerful abstraction. The `RAGService` can simply call `assistant.generateQuiz(5)` as if it were a regular Java method. The interface completely hides the complexity of:
1.  Formatting the prompt.
2.  Making an HTTP call to the AI model.
3.  Waiting for the response.
4.  Parsing the JSON response into a Java object.

This is an excellent example of abstraction, allowing the rest of the application to interact with the AI in a very clean and type-safe way.

## VI. ACCESS CONTROL

Access control is used effectively throughout the project to enforce encapsulation and define clear public APIs between layers.

**Data Access Control Table**

| No | Data (Variable)      | Class             | Modifier  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               - `question`, `answer` | `Flashcard`       | `private` | The internal state of model objects is kept private. This prevents direct, uncontrolled modification from other classes. Data is only exposed via public getters/setters, ensuring encapsulation. |
| 2  | `ragService`         | `StudyController` | `private final` | This is an internal dependency injected by Spring. It's `private` because no class outside of `StudyController` should have access to its specific instance. It is `final` to ensure it's not changed after construction. |

**Method Access Control Table**

| No | Method                               | Class             | Modifier | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 - `uploadPdf(...)`                     | `StudyController` | `public` | Methods in a controller that map to HTTP endpoints must be `public` so the Spring framework can discover and invoke them. They form the public API of the service. |
| 2  | `ingestDocument(...)`                | `RAGService`      | `public` | This method is part of the service layer's public API, intended to be called by the controller layer (`StudyController`). It exposes the core functionality of the service. |
| 3  | `getOriginalContent(...)`            | `RAGService`      | `public` | This method is also public, likely used by other methods within the service or potentially other services to retrieve raw document text. |

## VII. ENCAPSULATION VS INHERITANCE VS POLYMORPHISM

### 1. Encapsulation

This is the most heavily used OOP principle in the project.
-   **Data Hiding:** In all model classes (`Flashcard`, `Summary`, etc.), the instance variables are (or should be, assuming Lombok defaults) `private`. This prevents direct access to the internal state of the objects.
-   **Controlled Access:** Public getter and setter methods are used (provided automatically by Lombok's `@Data` annotation) to read and modify this state. This allows for validation or other logic to be added in the future without changing the class's public contract.
-   **Service Layer:** The `RAGService` encapsulates the entire complex logic of document parsing, embedding, and storage. The `StudyController` doesn't need to know *how* a document is ingested; it just calls `ragService.ingestDocument(...)`. All the implementation details are hidden within the `RAGService` class.

**Example from `com.khoa.notebooklm.model.Flashcard.java`:**
```java
// (Assuming Lombok @Data or @Getter/@Setter)
// private String question;
// private String answer;

// The public methods are implicitly generated:
// public String getQuestion() { return this.question; }
// public void setQuestion(String q) { this.question = q; }
```

### 2. Inheritance

Direct implementation inheritance (`extends`) is not a major feature of this project's architecture based on the provided files. The design favors **composition over inheritance**. For example, `StudyController` *has a* `RAGService`, rather than being a type of `RAGService`. This is a common and flexible approach in modern application design, especially with dependency injection frameworks like Spring.

### 3. Polymorphism

Polymorphism is demonstrated subtly but powerfully through the use of the `StudyAssistant` interface.

-   The `RAGService`'s `createAssistantForDocument` method returns an object of type `StudyAssistant`.
-   The actual object returned is a dynamic proxy created by LangChain4j's `AiServices`.
-   The `StudyController` code simply interacts with the `StudyAssistant` interface, completely unaware of the underlying implementation details.

This allows the implementation of `StudyAssistant` to be changed without affecting the controller. For instance, one could create a mock implementation for testing, or a different implementation that calls a different AI model. The controller's code would not need to change, as it only depends on the `StudyAssistant` interface, demonstrating polymorphism.

## VIII. EXPERIMENT

### 1. Environment and Tools

a.  **Environment:**
    -   The application is a standard Java backend service. It can be run on any machine with a compatible Java Development Kit (JDK).
    -   **CPU/RAM:** The resource requirements would depend on the size of the documents being processed and the number of concurrent users. The in-memory embedding store (`InMemoryEmbeddingStore`) will consume RAM proportional to the number and size of ingested documents.

b.  **Tools:**
    -   **Java:** Version 21
    -   **Maven:** For dependency management and project build.
    -   **Spring Boot 3.5.0:** The core framework for building the application and its REST API.
    -   **LangChain4j 0.35.0:** The primary library for orchestrating interactions with Large Language Models.
        -   `langchain4j-google-ai-gemini`: Adapter for Google's Gemini models.
        -   `langchain4j-vertex-ai`: For using Vertex AI embedding models.
        -   `langchain4j-document-parser-apache-pdfbox`: For parsing PDF files.
    -   **Google Cloud Text-to-Speech:** Library for converting text into audio.
    -   **Lombok:** A utility to reduce boilerplate code (getters, setters, constructors).

### 2. Project functions

The project exposes its functionality as a REST API:
-   `POST /api/rag/upload`: Accepts a PDF file, processes it, and stores it for future queries.
-   `POST /api/rag/chat`: Allows asking a natural language question about a previously uploaded document.
-   `POST /api/rag/flashcards`: Generates a set of JSON-formatted flashcards from a document.
-   `POST /api/rag/quiz`: Generates a JSON-formatted multiple-choice quiz from a document.
-   `POST /api/rag/summary`: Generates a structured JSON summary of a document.
-   `POST /api/rag/podcast`: Creates a short, conversational podcast script from a document's content.
-   `POST /api/rag/tts`: Converts text to an MP3 audio stream.

### 3. Database

The project does not use a traditional relational database (like MySQL). It uses a flat-file persistence strategy located in the `data/` directory.

-   **Document Content:** The raw text extracted from each uploaded PDF is stored in a separate `.txt` file (e.g., `data/<uuid>.txt`). This serves as a permanent record of the source material.
-   **Vector Embeddings:** The vector data (the numerical representation of the text chunks) is stored in a single JSON file: `data/vector-store.json`. The `InMemoryEmbeddingStore` from LangChain4j is used, which can be serialized to and from this file.

This approach is simple and effective for a prototype or small-scale application but would not be suitable for a large-scale, multi-user system where concurrent writes and scalability are required.

### 4. GUI

This project is a **backend-only service**. It does not have a Graphical User Interface (GUI). It exposes a REST API, which is intended to be consumed by a separate frontend application (e.g., a web application built with React, Angular, or Vue.js). The frontend would be responsible for providing the user interface for file uploads, displaying the chat, and rendering the generated study materials.

## IX. CONCLUSION

**Pros:**
-   **Modern Technology Stack:** The project uses up-to-date versions of Java, Spring Boot, and the innovative LangChain4j library, making it a good example of modern AI-powered application development.
-   **Clear Separation of Concerns:** The code is well-organized into `controller`, `service`, and `model` packages, which makes it easy to understand and maintain.
-   **Powerful Abstraction:** The use of the `StudyAssistant` interface is a highlight, perfectly abstracting away the complexity of LLM interactions.
-   **Robust Ingestion:** The `RAGService` includes thoughtful features like batching, retries, and delays during the embedding process to handle potential API rate limits, showing an awareness of real-world production issues.
-   **Persistence:** The system correctly persists both the original document content and the generated vector embeddings, ensuring that data is not lost when the application restarts.

**Cons:**
-   **No Unit/Integration Tests:** The file structure does not show a `src/test` directory with any tests. This is a significant drawback for a production-ready application, as there is no automated way to verify that the code works as expected or to prevent regressions.
-   **Basic Scalability:** The use of an in-memory embedding store that is serialized to a single JSON file will not scale well. With many large documents, the application's memory usage will be very high, and reading/writing the entire JSON file on every change will become a bottleneck.
-   **No User Management:** The application is designed for a single user. There is no concept of user accounts, so all uploaded documents are stored in a shared space.
-   **Error Handling:** While some basic error handling is present (e.g., checking for content in the summary endpoint), it could be more robust and provide more structured error responses to the client.

**Future Improvements:**
-   **Add a comprehensive test suite:** Use JUnit and Mockito to write unit tests for the services and integration tests for the controller endpoints.
-   **Implement a proper Vector Database:** Replace the `InMemoryEmbeddingStore` with a dedicated vector database like Pinecone, Weaviate, or ChromaDB for better scalability, performance, and concurrent access.
-   **Add User Authentication/Authorization:** Integrate Spring Security to add user accounts, so each user can manage their own set of documents.
-   **Develop a Frontend Client:** Build a simple web interface to interact with the backend API, providing a complete user experience.

Overall, this is a very strong and well-designed prototype that effectively demonstrates how to build a RAG-based application. With the improvements listed above, it could be evolved into a robust, production-ready system.

## APPENDIX A: CLASS DESCRIPTION

-   **Class 1: `StudyController`** (Source: `src/main/java/com/khoa/notebooklm/controller/StudyController.java`)
-   **Class 2: `RAGService`** (Source: `src/main/java/com/khoa/notebooklm/service/RAGService.java`)
-   **Class 3: `StudyAssistant`** (Source: `src/main/java/com/khoa/notebooklm/service/StudyAssistant.java`)
-   **Class 4: `Flashcard`** (Source: `src/main/java/com/khoa/notebooklm/model/Flashcard.java`)
-   **Class 5: `RAGConfig`** (Source: `src/main/java/com/khoa/notebooklm/config/RAGConfig.java`)
